# Модель продуктового рынка

Документация для программы имитиррование работы продуктового рынка

<h2>Класс Seller</h2>
Класс `Seller` представляет собой модель продавца на рынке. Он имеет следующие атрибуты и методы:

## 1. `__init__(self, name)`
- `name` (str): Имя продавца.

Конструктор класса инициализирует экземпляр продавца с заданным именем. Также создаются пустые списки для продуктов (`self.products`), акций и скидок (`self.promotions`). Начальный счет продавца (`self.account`) равен 0.0.

## 2. `add_product(self, product_name, price, expiration_date)`
- `product_name` (str): Название продукта.
- `price` (float): Цена продукта.
- `expiration_date` (str): Срок годности продукта в формате "ГГГГ-ММ-ДД".

Этот метод добавляет новый продукт в список продуктов продавца (`self.products`). Сначала он проверяет, не истек ли срок годности продукта, сравнивая `expiration_date` с текущей датой. Если срок годности истек, выводится соответствующее сообщение, и продукт не добавляется. В противном случае создается экземпляр класса `Product` и добавляется в список `self.products`. После этого выводится сообщение об успешном добавлении продукта.

## 3. `find_product(self, product_name)`
- `product_name` (str): Название продукта, который нужно найти.

Этот метод ищет продукт с заданным названием в списке `self.products`. Если продукт найден, метод возвращает его объект. В противном случае возвращается `None`.

## 4. `show_products(self)`
Метод выводит список всех продуктов продавца. Если продукты есть, выводится их список с ценами. Если на некоторые продукты действуют акции или скидки, то выводится цена со скидкой и размер скидки в процентах. Если список продуктов пуст, выводится соответствующее сообщение.

## 5. `add_promotion(self, product_name, discount_percent)`
- `product_name` (str): Название продукта, на который добавляется акция.
- `discount_percent` (float): Размер скидки в процентах.

Этот метод добавляет новую акцию или скидку на продукт в список `self.promotions`. Создается экземпляр класса `Promotion` с заданными параметрами и добавляется в список. После этого выводится сообщение об успешном добавлении акции.

## 6. `find_promotion(self, product_name)`
- `product_name` (str): Название продукта, для которого нужно найти акцию.

Метод ищет акцию или скидку для заданного продукта в списке `self.promotions`. Если акция найдена, метод возвращает ее объект. В противном случае возвращается `None`.

<h2>Класс Promotion</h2>
Класс `Promotion` представляет собой систему скидок. Он имеет следующие атрибуты и методы:

## 1. `__init__(self, product_name, discount_percent)`
- `product_name` (str): Название продукта, на который применяется скидка.
- `discount_percent` (float): Процент скидки на продукт.

Конструктор класса инициализирует экземпляр класса `Promotion` с указанным названием продукта и процентом скидки.

## 2. `apply_discount(self, price)`
- `price` (float): Исходная цена продукта.

Этот метод вычисляет новую цену продукта после применения скидки. Скидка рассчитывается как `price * (self.discount_percent / 100)`, а затем вычитается из исходной цены. Метод возвращает новую цену после применения скидки.

<h2>Класс Product</h2>
Этот класс представляет продукт в программе. Он имеет следующие атрибуты и методы:

## 1. `__init__(self, name, price, expiration_date)`
- `name` (str): Название продукта.
- `price` (float): Цена продукта.
- `expiration_date` (datetime.date): Дата истечения срока годности продукта.

Конструктор класса инициализирует экземпляр продукта с заданным названием, ценой и датой истечения срока годности.

## 2. `is_expired(self)`
Этот метод проверяет, истек ли срок годности продукта. Он возвращает `True`, если текущая дата (`datetime.date.today()`) больше или равна `expiration_date`, и `False` в противном случае.

<h2>Класс Price</h2>
Этот класс представляет цену продукта. Он имеет следующие атрибуты и методы:

## 1. `__init__(self, value)`
- `value` (float): Исходная цена продукта или услуги.

Конструктор класса инициализирует экземпляр цены с заданным значением.

## 2. `apply_discount(self, discount)`
- `discount` (float): Размер скидки в процентах.

Этот метод применяет скидку к исходной цене. Новая цена после применения скидки вычисляется по формуле `self.value *= (1 - discount / 100)`. Значение `self.value` обновляется новой ценой после скидки.

<h2>Класс Market</h2>
Класс `Market` представляет собой модель рынка. Он имеет следующие атрибуты и методы:

## 1. `__init__(self)`
Конструктор класса инициализирует экземпляр рынка с пустыми списками покупателей (`self.customers`) и продавцов (`self.sellers`).

## 2. `add_customer(self, customer)`
- `customer` (объект класса `Customer`): Объект покупателя, который нужно добавить.

Этот метод добавляет нового покупателя в список `self.customers` и выводит сообщение об успешном добавлении.

## 3. `find_customer(self, name)`
- `name` (str): Имя покупателя, которого нужно найти.

Метод ищет покупателя с заданным именем в списке `self.customers`. Если покупатель найден, метод возвращает его объект. В противном случае возвращается `None`.

## 4. `add_seller(self, seller)`
- `seller` (объект класса `Seller`): Объект продавца, который нужно добавить.

Этот метод добавляет нового продавца в список `self.sellers` и выводит сообщение об успешном добавлении.

## 5. `find_seller(self, name)`
- `name` (str): Имя продавца, которого нужно найти.

Метод ищет продавца с заданным именем в списке `self.sellers`. Если продавец найден, метод возвращает его объект. В противном случае возвращается `None`.

## 6. `show_customers(self)`
Этот метод выводит список зарегистрированных покупателей на рынке. Если список покупателей пуст, выводится соответствующее сообщение.

## 7. `show_sellers(self)`
Этот метод выводит список зарегистрированных продавцов на рынке. Если список продавцов пуст, выводится соответствующее сообщение.

<h2>Класс Customer</h2>
Класс `Customer` представляет собой модель покупателя на рынке. Он имеет следующие атрибуты и методы:

## 1. `__init__(self, name, budget)`
- `name` (str): Имя покупателя.
- `budget` (float): Бюджет покупателя.

Конструктор класса инициализирует экземпляр покупателя с заданным именем и бюджетом. Также создается пустая корзина (`self.cart = Cart()`).

## 2. `add_to_cart(self, seller, product_name, quantity)`
- `seller` (объект класса `Seller`): Продавец, у которого нужно купить товар.
- `product_name` (str): Название продукта, который нужно добавить в корзину.
- `quantity` (int): Количество продукта.

Этот метод добавляет продукт в корзину покупателя. Сначала он находит продукт у продавца с помощью метода `seller.find_product(product_name)`. Если продукт найден, метод проверяет наличие акции или скидки на этот продукт с помощью метода `seller.find_promotion(product_name)`. Если акция найдена, применяется скидка к цене продукта. Затем вычисляется общая стоимость покупки. Если бюджет покупателя достаточен для совершения покупки, продукт добавляется в корзину (`self.cart.add_item()`), и выводится соответствующее сообщение. В противном случае выводится сообщение о недостаточном бюджете.

## 3. `purchase(self, seller)`
- `seller` (объект класса `Seller`): Продавец, у которого совершается покупка.

Этот метод завершает процесс покупки. Сначала он вычисляет общую стоимость всех продуктов в корзине с помощью метода `self.cart.calculate_total()`. Если бюджет покупателя достаточен для совершения покупки, бюджет покупателя уменьшается на общую стоимость, а счет продавца увеличивается на эту же сумму (`seller.account += total_cost`). Затем из списка продуктов продавца удаляются купленные продукты (`seller.products.remove(item['product'])`). Корзина покупателя очищается (`self.cart.clear()`), и выводится сообщение об успешной покупке с остатком бюджета. Если бюджет недостаточен, выводится соответствующее сообщение.

<h2>Класс Cart</h2>
Класс `Cart` представляет собой модель корзины покупателя, в которую добавляются товары для последующей покупки. Он имеет следующие атрибуты и методы:

## 1. `__init__(self)`
Конструктор класса инициализирует экземпляр корзины с пустым списком `self.items`.

## 2. `add_item(self, seller, product, quantity, price)`
- `seller` (объект класса `Seller`): Продавец, у которого был куплен товар.
- `product` (объект класса `Product`): Продукт, который добавляется в корзину.
- `quantity` (int): Количество продукта.
- `price` (float): Цена продукта (может быть со скидкой).

Этот метод добавляет товар в корзину. Он создает словарь `item`, содержащий информацию о продавце, продукте, количестве и цене, и добавляет его в список `self.items`.

## 3. `calculate_total(self)`
Метод вычисляет общую стоимость всех товаров в корзине. Он проходит по списку `self.items`, умножает цену каждого товара на его количество и суммирует полученные результаты. Общая стоимость возвращается методом.

## 4. `clear(self)`
Этот метод очищает корзину, удаляя все элементы из списка `self.items`.